<%= render SectionHeaderComponent.new do |c| %>
  <%= c.with_title do %>
    Subscription
  <% end %>
<% end %>
<%= render_component 'card', classes: "max-w-48", data: { controller: "paddle", paddle_product_id_value: current_user.organization.subscription&.subscription_plan_id || @plans.first[:id], paddle_passthrough_value: current_user.organization.id, paddle_email_value: current_user.email } do %>
  <div class="flex flex-row">
    <select data-action="paddle#select" class="bg-gray-100 focus:bg-gray-200 dark:bg-gray-800 dark:focus:bg-gray-700 border-transparent focus:border-gray-100 text-gray-800 dark:text-gray-100 block max-w-full sm:text-sm rounded-md">
      <% @plans.each do |plan| %>
        <option value=<%= plan[:id] %>><%= plan[:name] %></option>
      <% end %>
    </select>
    <button data-action="paddle#checkout" type="button" class="ml-auto inline-flex items-center px-4 py-2 border border-transparent text-gray-900 bg-yellow-400 hover:bg-yellow-500 focus:ring-yellow-500 text-sm font-medium rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2"><%= heroicon 'lock-closed', class: "mr-3" %>Subscribe securely through Paddle</button>
  </div>
<% end %>
